<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.bootcss.com/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
		crossorigin="anonymous"></script>
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
	<title>Document</title>
</head>

<body>
	<div class="container">
		<div>
			<img src="../../image/icon/usericon.jpg" id="usericon">
			<button class="btn btn-primary" type="file" id="usericonbtn">更换头像</button>
		</div>
		<form class="row g-3 align-items-center form-group" id="listbox">
			<div class="col-auto">
				<label for="inputPassword6" class="col-form-label">学号：</label>
			</div>
			<div class="col-auto">
				<input type="text" id="inputbox_xuehao" class="form-control" readonly>
			</div>
			<div class="col-auto">
				<label for="inputPassword6" class="col-form-label">姓名：</label>
			</div>
			<div class="col-auto">
				<input type="text" id="inputbox_name" class="form-control" readonly>
			</div>
			<div class="col-auto">
				<label for="inputPassword6" class="col-form-label">班级：</label>
			</div>
			<div class="col-auto">
				<input type="text" id="inputbox_class" class="form-control" readonly>
			</div>
			<div class="col-auto">
				<label for="inputPassword6" class="col-form-label">年龄：</label>
			</div>
			<div class="col-auto">
				<input type="text" id="inputbox_age" class="form-control" readonly>
			</div>
			<div class="col-auto">
				<label for="inputPassword6" class="col-form-label">性别：</label>
			</div>
			<div class="col-auto">
				<input type="text" id="inputbox_sex" class="form-control" readonly>

			</div>
			<div class="offset-2" id="btnbox">
				<button id="xiugaixinxi" class="btn btn-warning col-6" type="button" onclick="xiugai()">修改信息</button>
			</div>


		</form>
	</div>

</body>
<script>
	var currentuser = JSON.parse(sessionStorage.getItem("file_currentuser"));//从之前保存在浏览器缓存的数据中读取当前用户信息
	fillinput();
	function fillinput() {//在各种输入框中填入用户信息
		$("#inputbox_xuehao").val(currentuser.xuehao);
		$("#inputbox_name").val(currentuser.name);
		$("#inputbox_class").val(currentuser.banjistr);
		$("#inputbox_age").val(currentuser.age);
		$("#inputbox_sex").val(currentuser.sex);
	}

	function xiugai() {
		$("#listbox input").removeAttr("readonly");
		$("#btnbox").html("");
		$("#btnbox").html("<button id=\"queren\" class=\"btn btn-danger col-3\" type=\"button\" onclick=\"querenrt()\">确认</button>" +
			"<button id=\"quxiao\" class=\"btn btn-warning col-3\" type=\"button\" onclick=\"quxiaort()\">取消</button>");
	}

	function querenrt() {
		$("#listbox input").attr("readonly", "readonly");
		$("#btnbox").html("");
		$("#btnbox").html("<button id=\"xiugaixinxi\" class=\"btn btn-warning col-6\" type=\"button\" onclick=\"xiugai()\">修改信息</button>");
		currentuser.xuehao = $("#inputbox_xuehao").val();
		currentuser.name = $("#inputbox_name").val();
		currentuser.banji = $("#inputbox_class").val();
		currentuser.age = $("#inputbox_age").val();
		currentuser.sex = $("#inputbox_sex").val();
		sessionStorage.setItem("file_currentuser", currentuser);
		return
	}

	function quxiaort() {
		$("#listbox input").attr("readonly", "readonly");
		$("#btnbox").html("");
		$("#btnbox").html("<button id=\"xiugaixinxi\" class=\"btn btn-warning col-6\" type=\"button\" onclick=\"xiugai()\">修改信息</button>");
		fillinput();
		return
	}

</script>
<style>
	.form-group {
		margin-top: -166px;
		width: 500px;
		width: 20em;
	}

	.form-group label {
		line-height: 2em;
		text-align: center;
	}

	#usericon {
		position: relative;
		top: calc(0px + 0.25em);
		left: 325px;
		width: 150px;
	}

	#usericonbtn {
		position: relative;
		top: calc(110px + 0.25em);
		left: calc(170px + 25px);
		width: 100px;
	}

	#btnbox {
		padding-left: 1.25em;
		margin-top: 1em;
	}

	#quxiao {
		margin-left: 1em;
	}
</style>

</html>